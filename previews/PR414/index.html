<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SnoopCompile.jl · SnoopCompile</title><meta name="title" content="SnoopCompile.jl · SnoopCompile"/><meta property="og:title" content="SnoopCompile.jl · SnoopCompile"/><meta property="twitter:title" content="SnoopCompile.jl · SnoopCompile"/><meta name="description" content="Documentation for SnoopCompile."/><meta property="og:description" content="Documentation for SnoopCompile."/><meta property="twitter:description" content="Documentation for SnoopCompile."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>SnoopCompile</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>SnoopCompile.jl</a><ul class="internal"><li><a class="tocitem" href="#SnoopCompile-analysis-modes"><span>SnoopCompile analysis modes</span></a></li><li><a class="tocitem" href="#Background-information"><span>Background information</span></a></li><li><a class="tocitem" href="#Who-should-use-this-package"><span>Who should use this package</span></a></li></ul></li><li><span class="tocitem">Basic tutorials</span><ul><li><a class="tocitem" href="tutorials/invalidations/">Tutorial on <code>@snoop_invalidations</code></a></li><li><a class="tocitem" href="tutorials/snoop_inference/">Tutorial on <code>@snoop_inference</code></a></li><li><a class="tocitem" href="tutorials/snoop_llvm/">Tutorial on <code>@snoop_llvm</code></a></li><li><a class="tocitem" href="tutorials/pgdsgui/">Profile-guided despecialization</a></li><li><a class="tocitem" href="tutorials/jet/">Tutorial on JET integration</a></li></ul></li><li><span class="tocitem">Advanced tutorials</span><ul><li><a class="tocitem" href="tutorials/snoop_inference_analysis/">Using <code>@snoop_inference</code> results to improve inferrability</a></li><li><a class="tocitem" href="tutorials/snoop_inference_parcel/">Using <code>@snoop_inference</code> to emit manual precompile directives</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="explanations/tools/">Package roles and alternatives</a></li><li><a class="tocitem" href="explanations/gotchas/">Precompilation &quot;gotcha&quot;s</a></li><li><a class="tocitem" href="explanations/fixing_inference/">Techniques for fixing inference problems</a></li></ul></li><li><a class="tocitem" href="reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>SnoopCompile.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SnoopCompile.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/timholy/SnoopCompile.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/timholy/SnoopCompile.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="SnoopCompile.jl"><a class="docs-heading-anchor" href="#SnoopCompile.jl">SnoopCompile.jl</a><a id="SnoopCompile.jl-1"></a><a class="docs-heading-anchor-permalink" href="#SnoopCompile.jl" title="Permalink"></a></h1><p>Julia is fast, but its execution speed depends on optimizing code through <em>compilation</em>. Code must be compiled before you can use it, and unfortunately compilation is slow. This can cause <em>latency</em> the first time you use code: this latency is often called <em>time-to-first-plot</em> (TTFP) or more generally <em>time-to-first-execution</em> (TTFX). If something feels slow the first time you use it, and fast thereafter, you&#39;re probably experiencing the latency of compilation. Note that TTFX is distinct from time-to-load (TTL, which refers to the time you spend waiting for <code>using MyPkg</code> to finish), even though both contribute to latency.</p><p>Modern versions of Julia can store compiled code to disk (<em>precompilation</em>) to reduce or eliminate latency. Users and developers who are interested in reducing TTFX should first head to <a href="https://github.com/JuliaLang/PrecompileTools.jl">PrecompileTools</a>, read its documentation thoroughly, and try using it to solve latency problems.</p><p>This package, <strong>SnoopCompile</strong>, should be considered when:</p><ul><li>precompilation doesn&#39;t reduce TTFX as much as you wish</li><li>precompilation &quot;works,&quot; but only in isolation: as soon as you load (certain) additional packages, TTFX is bad again</li><li>you&#39;re wondering if you can reduce the amount of time needed to precompile your package and/or the size of the precompilation cache files</li></ul><p>In other words, SnoopCompile is a diagonostic package that helps reveal the causes of latency. Historically, it proceeded PrecompileTools, and indeed PrecompileTools was split out from SnoopCompile. Today, SnoopCompile is generally needed only when PrecompileTools fails to deliver the desired benefits.</p><h2 id="SnoopCompile-analysis-modes"><a class="docs-heading-anchor" href="#SnoopCompile-analysis-modes">SnoopCompile analysis modes</a><a id="SnoopCompile-analysis-modes-1"></a><a class="docs-heading-anchor-permalink" href="#SnoopCompile-analysis-modes" title="Permalink"></a></h2><p>SnoopCompile &quot;snoops&quot; on the Julia compiler, collecting information that may be useful to developers. Here are some of the things you can do with SnoopCompile:</p><ul><li>diagnose <em>invalidations</em>, cases where Julia must throw away previously-compiled code (see <a href="tutorials/invalidations/#Tutorial-on-@snoop_invalidations">Tutorial on <code>@snoop_invalidations</code></a>)</li><li>trace <em>inference</em>, to learn what code is being newly (or freshly) analyzed in an early stage of the compilation pipeline (<a href="tutorials/snoop_inference/#Tutorial-on-@snoop_inference">Tutorial on <code>@snoop_inference</code></a>)</li><li>trace <em>code generation by LLVM</em>, a late stage in the compilation pipeline (<a href="tutorials/snoop_llvm/#Tutorial-on-@snoop_llvm">Tutorial on <code>@snoop_llvm</code></a>)</li><li>reveal methods with excessive numbers of compiler-generated specializations, a.k.a.<em>profile-guided despecialization</em> (<a href="tutorials/pgdsgui/#pgds">Tutorial on PGDS</a>)</li><li>integrate with tools like <a href="https://github.com/aviatesk/JET.jl">JET</a> to further reduce the risk that your lovingly-precompiled code will be invalidated by loading other packages (<a href="tutorials/jet/#Tutorial-on-JET-integration">Tutorial on JET integration</a>)</li></ul><h2 id="Background-information"><a class="docs-heading-anchor" href="#Background-information">Background information</a><a id="Background-information-1"></a><a class="docs-heading-anchor-permalink" href="#Background-information" title="Permalink"></a></h2><p>If nothing else, you should know this:</p><ul><li>invalidations occur when you <em>load</em> code (e.g., <code>using MyPkg</code>) or otherwise define new methods</li><li>inference and other stages of compilation occur the first time you <em>run</em> code for a particular combination of input types</li></ul><p>The individual tutorials briefly explain core concepts. More detail can be found in <a href="explanations/basic/#Understanding-SnoopCompile-and-Julia&#39;s-compilation-pipeline">Understanding SnoopCompile and Julia&#39;s compilation pipeline</a>.</p><h2 id="Who-should-use-this-package"><a class="docs-heading-anchor" href="#Who-should-use-this-package">Who should use this package</a><a id="Who-should-use-this-package-1"></a><a class="docs-heading-anchor-permalink" href="#Who-should-use-this-package" title="Permalink"></a></h2><p>SnoopCompile is intended primarily for package <em>developers</em> who want to improve the experience for their users. It is also recommended for users who are willing to &quot;dig deep&quot; and understand why packages they depend on have high latency. <strong>Your experience with latency may be personal, as it can depend on the specific combination of packages you load.</strong> If latency troubles you, don&#39;t make the assumption that it must be unfixable: you might be the first person affected by that specific cause of latency.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="tutorials/invalidations/">Tutorial on <code>@snoop_invalidations</code> »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.9.0 on <span class="colophon-date" title="Thursday 20 March 2025 19:44">Thursday 20 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
